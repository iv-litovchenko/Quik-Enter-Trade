# Quik-Enter-Trade
Quik Enter Trade - торговый привод для терминала Quik для срочного рынка FORTS Московской биржи

[![Watch the video](https://img.youtube.com/vi/ZY1ffzLYBX4/maxresdefault.jpg)](https://youtu.be/ZY1ffzLYBX4)
[Видео-презентация на YouTube](https://youtu.be/ZY1ffzLYBX4)

## Описание торгового привода

Умеет: открывать длинную позицию, открывать короткую позицию с заданным объемом, переворачивать текущую позицию, закрывать позицию частично либо полностью, выставлять защитные стоп-ордера (тип стоп и тейк №9).

Дополнительно умеет: рассчитывать максимальный объем контрактов для входа в позицию, а также максимально допустимый размер стоп-лосса при заданных параметрах риск-менеджмента.

В рабочем окне привода отображается основная повседневная информация для трейдера о текущих открытых позициях, о текущем состоянии счета, об изменении счета за день, о текущем состоянии сессии.

## Установка торгового привода (тестировалось в Quik7, Windows 7,8):

1. Для проигрывания звуков необходимо скачать и закинуть в папку Quik библиотеку "w32.dll": https://quik2dde.ru/viewtopic.php?id=78

2. При первоначальном знакомстве рекомендуется опробовать привод на демо-счете

3. После скачивания архива все содержимое архива необходимо разместить в папку, где установлен Quik ("C:\QUIK-...\LuaIndicators\")

4. В файле "EnterTrade.Settings.All.lua" необходимо установить ваш "Торговый счет" и "Код клиента"

5. В файле "EnterTrade.Settings.All.lua" в переменной "FILE_SETTINGS_LIST_TICKETS" необходимо перечислить список торгуемых тикетов 

6. Проверить существование папки для логов ("C:\QUIK-...\LuaIndicators\EnterTradeLog"), если она была удалена по какой-либо причине

7. После вышеперечисленного, необходимо запустить сам скрипт "Сервисы > Lua-скрипты... > Добавить" 

8. Важно: пока работает скрипт крайне не рекомендуется открывать файлы "№СЧЕТА.report.csv" и "№СЧЕТА.report.full.csv"

9. Важно: 

9.1. по умолчанию при запуске скрипта в файле "Settings.Callback.Alert.lua" приведен пример оповещения на основе пересечения цены и индикатора SAR (функция MyAlertSar()), а также достижение ценой определенных значений цен (функция MyAlert())

9.2. по умолчанию при запуске скрипта в файле "EnterTrade.Settings.Callback.Robot.lua" в качестве примера описаны 4 торговых алгоритма (робота)

10. Важно: убедиться, что не запущено два экземпляра торгового привода (обычно может происходить после перезапуска Quik и ручного запуска еще 1 экземпляра)!

11. Для корректной работы алертов (добавления меток), необходимо убедиться, что на компьютере установлены актуальные дата и время (часы в нижнем правом углу)

## Дополнения в версии 1.3

1. Исправлен баг при выставлении заявок и стоп-ордеров, где кол-во цифр в номере заявки больше 10 (заявки выставлялись с ошибкой)

2. В настройках "Settings.All.lua" изменен параметр "FILE_SETTINGS_LIST_TICKETS". Код названия инструмента пишется без года и месяца. Раньше "RIU1", теперь "RI".